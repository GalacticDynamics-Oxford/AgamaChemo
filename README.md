# AgamaChemo
Chemodynamical model of the MW created with Agama
Here's code to create a chemodynamical model of the MW and optimise its stellar DFs and chemistry. To get this running, first create the the AGAMA library agama.dll - this library differs in some respects from the version available through the AGAMA repositry: it has some extensions and it's organised to compile under Windows and MS Visual Studio. Instructions for creating the dll can be found in the doc directory. Then go to the mains directory and run make: it should compile code for gridding particles and then the executables getPhi.exe and relax.exe. getPhi.exe computes the potential that's generated by the components specified in an m.ini file. The model described in arXiv is generated by the command-line: getPhi 4 ../M0  This reads the ini file in the directory ../M0
The DF or the chemical model is optimised by relax.exe using a command-line like relax 200 ../M0 which performs 200 Nelder-Mead iterations starting from the DFs specified in ../M0/m.ini and the chemical model ../M0/chem_params.dat  If dyn=true in main() the DFs will be adjusted, if dyn=false the chemistry will be adjusted. In the former case the proposed DFs will be written to dyn_params.dat for editing into the ini file
relax.cpp contains many calls to non-portable plotting software. These have been commented out but may suggest how plots could be created with other software.
